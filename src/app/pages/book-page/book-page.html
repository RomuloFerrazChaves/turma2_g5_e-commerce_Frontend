<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<div id="body">
  <div class="book-spec">
    <div class="img"></div>
    <div class="spec">
      <h1>{{ anuncio?.titulo }}</h1>
      <p>Autor: {{ anuncio?.autor }}</p>
      <p>Descrição: {{ anuncio?.descricao }}</p>
      <p>Gêneros:</p>
      <mat-chip-set>
        <mat-chip>{{ anuncio?.genero }}</mat-chip>
      </mat-chip-set>
    </div>
  </div>

  <form [formGroup]="commentForm">
    <mat-form-field class="col-12 input" appearance="outline">
      <mat-label style="color: #8c8b8b">Comentário</mat-label>
      <input matInput formControlName="texto" autocomplete="off" />
    </mat-form-field>

    <button class="new-comment" (click)="addComment()">Adicionar Comentário</button>
  </form>

  <div class="comments">
    <h1>Comentários</h1>

    <div class="dialog-box">
      <div class="no-comment" *ngIf="comments.length === 0">
        <p>Seja o primeiro a comentar!</p>
      </div>
      @for (comment of comments; track comment.id) {
      <div class="comment">
        <div class="info">
          <small>por {{ comment.usuario?.nome || 'Usuário' }}</small>
          <p>{{ comment.texto }}</p>
        </div>
        @if (comment.usuarioId === userId) {
        <button type="button" class="btn btn-danger btn-sm" (click)="deleteComment(comment.id)">
          Deletar
        </button>
        }
      </div>

      }
    </div>
  </div>
</div>
